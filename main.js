!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){e.call(this),a&&(this.update=a.update||this.update,this.draw=a.draw||this.draw)}function e(){if(!o){var a=this;document.onkeydown=l.onKeyDown,document.onkeyup=l.onKeyUp;var b=document.createElement("canvas");document.body.appendChild(b),this.canvas=b,this.context=b.getContext("2d"),this.context.clear=function(){this.clearRect(0,0,a.width,a.height)},b.onmousemove=l.onMouseMove,b.onmousedown=l.onMouseDown,b.onmouseup=l.onMouseUp,b.onmousewheel=l.onMouseWheel,b.oncontextmenu=l.onContextMenu,b.ontouchstart=l.onTouchStart,b.ontouchmove=l.onTouchMove,b.ontouchend=l.onTouchEnd,b.ontouchcancel=l.onTouchEnd,b.ontouchleave=l.onTouchEnd,window.onresize=function(){a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,a.width=a.canvas.width,a.height=a.canvas.height},window.onresize(),o=!0}}function f(a,b,c){if(this.audioContext){var d=this,e=new XMLHttpRequest;e.responseType="arraybuffer",e.open("GET",a,!0),e.onload=function(){d.audioContext.decodeAudioData(e.response,function(a){b&&b(null,a,c)},function(a){b&&b(a)})};try{e.send()}catch(f){b&&b(f.message)}}else b("No audio support")}function g(a,b){function c(a,c,d){a&&console.error(a),c&&(g.SFX[d]=c),e--,b&&0===e&&b()}this.audioContext=new AudioContext,this._mixer=this.audioContext.createGain(),this._mixer.connect(this.audioContext.destination);var d,e=0,g=this;if(this.audioContext)for(d in a){var h=a[d];e++,f.call(this,h,c,d)}else b&&b("No audio support")}function h(a){var b=this.SFX[a];if(b&&this.audioContext){var c=this.audioContext.createBufferSource();return c.buffer=b,c.connect(this._mixer),c.start(),c}}function i(a){this._mixer.gain.value=a}function j(a,b,c){try{var d=new Image;d.onload=function(){b&&b(null,d,c)},d.onerror=function(a){b&&b(a)},d.src=a}catch(e){b&&b(error)}}function k(a,b){function c(a,c,d){a&&console.error(a),c&&(f.GFX[d]=c),e--,b&&0===e&&b()}var d,e=0,f=this;for(d in a){var g=a[d];e++,j.call(this,g,c,d)}}var c,l=a("./input");d.prototype.update=function(a){},d.prototype.draw=function(){},d.prototype.run=function(){function a(){b.step(),b.frameRequest=requestAnimationFrame(a)}var b=this;this.running||(this.running=!0,this.last_step=Date.now(),this.frameRequest=requestAnimationFrame(a))},d.prototype.stop=function(){this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.frameRequest=null,this.running=!1},d.prototype.step=function(){var a=Date.now(),b=(a-this.last_step)/1e3;this.last_step=a,this.update(b),this.draw(),l.clearPressed()};var m={},n={},o=!1;c={init:e,Game:d,loadImage:j,preloadImages:k,loadSound:f,preloadSounds:g,playSound:h,setVolume:i,GFX:n,SFX:m,input:l},"undefined"!=typeof b&&b.exports?b.exports=c:window.atom=c},{"./input":2}],2:[function(a,b,c){function d(a){if(a instanceof KeyboardEvent){if("keydown"===a.type||"keyup"===a.type)return a.keyCode}else if(a instanceof MouseEvent){if("mousedown"===a.type||"mouseup"===a.type){if(0===a.button)return r.MOUSE_LEFT;if(1===a.button)return r.MOUSE_MIDDLE;if(2===a.button)return r.MOUSE_RIGHT}}else if(a instanceof WheelEvent){if("mousewheel"===a.type)return a.wheel>0?r.MOUSE_WHEEL_UP:r.MOUSE_WHEEL_DOWN}else if("touchstart"===a.type||"touchend"===a.type||"touchcancel"===a.type||"touchleave"===a.type)return r.TOUCHING}function e(a,b){s[a]=b}function f(){v.forEach(function(a){t[a]=!1}),v=[],u={}}function g(a){var b=s[d(a)];b&&(t[b]||(u[b]=!0),t[b]=!0),a.stopPropagation(),a.preventDefault()}function h(a){var b=s[d(a)];b&&v.push(b),a.stopPropagation(),a.preventDefault()}function i(a){w.x=a.pageX,w.y=a.pageY}function j(a){g(a)}function k(a){h(a)}function l(a){g(a),h(a)}function m(a){s[r.MOUSE_RIGHT]&&(a.stopPropagation(),a.preventDefault())}function n(a){return u[a]}function o(a){return t[a]}function p(a){return a in v}function q(){return{x:w.x,y:w.y}}var r={MOUSE_LEFT:-1,MOUSE_MIDDLE:-2,MOUSE_RIGHT:-3,MOUSE_WHEEL_DOWN:-4,MOUSE_WHEEL_UP:-5,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,TOUCHING:1e3},s={},t={},u={},v=[],w={x:0,y:0};b.exports={getMouse:q,KEY:r,isPressed:n,isDown:o,isReleased:p,bindEvent:e,clearPressed:f,onKeyDown:g,onKeyUp:h,onMouseDown:j,onMouseUp:k,onMouseMove:i,onMouseWheel:l,onContextMenu:m}},{}],3:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.SPRITENAME="bubble"+e.WR(this.SIZES),this.dy=-e.r(1.9)-3.25,this.lifetime=0,this.amplitude=e.r(3)}var e=a("./util");d.prototype.x=0,d.prototype.y=0,d.prototype.hashable=!1,d.prototype.SPRITENAME=null,d.prototype.GFX={bubble4:{W:4,H:4,W_2:2,H_2:2},bubble6:{W:6,H:6,W_2:3,H_2:3},bubble8:{W:8,H:8,W_2:4,H_2:4},bubble12:{W:12,H:12,W_2:6,H_2:6},bubble16:{W:16,H:16,W_2:8,H_2:8},bubble24:{W:24,H:24,W_2:12,H_2:12},bubble32:{W:32,H:32,W_2:16,H_2:16}},d.prototype.dx=0,d.prototype.lifetime=0,d.prototype.draw=function(){var a,b;return a=this.game.context,a.globalAlpha=.3,b=atom.GFX[this.SPRITENAME],a.drawImage(b,this.x-this.GFX[this.SPRITENAME].W_2+this.amplitude*Math.sin(this.lifetime),this.y-this.GFX[this.SPRITENAME].H_2),this.lifetime++,a.globalAlpha=1},d.prototype.remove=function(){return this.move=null,this.game=null},d.prototype.move=function(){return this.y<-this.GFX[this.SPRITENAME].H_2||this.x<-this.GFX[this.SPRITENAME].W_2?(this.move=null,this.game=null):(this.y+=this.dy,this.x+=2*this.game.current)},d.prototype.SIZES={4:1,6:2,8:3,12:2,16:2,24:1,32:1},b.exports=d},{"./util":15}],4:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;null==this.speed&&(this.speed={x:0,y:0,normalizationFactor:e.r(.27)+.51}),this.player&&this.game.addFish(),null==this.dSpeed&&(this.dSpeed=e.r(.12)+.13),null==this.maxSpeed&&(this.maxSpeed=e.r(8)+4),this.frame=e.R(0,this.LASTFRAME),this.SPRITENAME=e.WR(this.FISHCHANCE),this.SPRITE=atom.GFX[this.SPRITENAME],this.updateHitRadius()}var e=a("./util");d.prototype.x=0,d.prototype.y=0,d.prototype.w=8,d.prototype.h=6,d.prototype.rotation=0,d.prototype.framedelay=0,d.prototype.FRAMEDELAYMOD=2,d.prototype.frame=0,d.prototype.LASTFRAME=7,d.prototype.SPRITE=null,d.prototype.SPRITENAME=null,d.prototype.GFX={fledgeling0:{W:28,H:17},fledgeling1:{W:54,H:34},fish00:{W:46,H:31},fish01:{W:116,H:77},fish10:{W:46,H:31},fish11:{W:116,H:77},fish20:{W:50,H:34},fish21:{W:125,H:86}},d.prototype.FISHCHANCE={fledgeling0:12,fledgeling1:12,fish00:7,fish10:4},d.prototype.speed=null,d.prototype.dSpeed=e.r(.31)+.27,d.prototype.maxSpeed=e.r(10)+2,d.prototype.fatnessPenalty=.987,d.prototype.energyBoost=1.00073,d.prototype.caught=!1,d.prototype.player=!1,d.prototype.recruitFailed=!1,d.prototype.hashable=!0,d.prototype.chase={w_2:32,h_2:32},d.prototype.target=atom.input.getMouse,d.prototype.normalizeSpeed=function(){if(Math.abs(this.x-this.target.x)<this.chase.w_2&&Math.abs(this.y-this.target.y)<this.chase.h_2){if(Math.abs(this.speed.x)<.4*this.maxSpeed||(this.speed.x*=.71*this.speed.normalizationFactor),!(Math.abs(this.speed.y)<.4*this.maxSpeed))return this.speed.y*=.71*this.speed.normalizationFactor}else if(Math.abs(this.speed.x)<this.maxSpeed||(this.speed.x*=this.speed.normalizationFactor),!(Math.abs(this.speed.y)<this.maxSpeed))return this.speed.y*=this.speed.normalizationFactor},d.prototype.setRotation=function(){return this.rotation=Math.atan2(this.speed.y,this.speed.x)},d.prototype.chaseTarget=function(){var a=this.target;return a instanceof Function&&(a=a()),this.x>a.x?this.speed.x-=this.dSpeed:this.speed.x+=this.dSpeed,this.y>a.y?this.speed.y-=this.dSpeed:this.speed.y+=this.dSpeed},d.prototype.move=function(){return this.caught?this.x<0||this.y<0?this.remove():(this.x=this.catcher.x,this.y=this.catcher.y):(this.player===!1&&this.recruitFailed===!1&&this.checkHits(),this.x+=this.speed.x,this.y+=this.speed.y,this.x+=this.game.current,this.chaseTarget(),this.normalizeSpeed(),this.setRotation())},d.prototype.recruit=function(a){var b;b=(this.r2-a.r2)/this.r2,e.r()>b||e.r()<.0015?("Swarm"===this.target.constructor.name&&(this.target.children[this.target.children.indexOf(this)]=null),atom.playSound("recruit"),this.target=atom.input.getMouse,this.player=!0,this.game.addFish()):(atom.playSound("ahahah"),this.recruitFailed=!0)},d.prototype.collectRoe=function(a){return atom.playSound("roe"),this.game.player.roe+=a},d.prototype.hooked=function(a){return this.catcher=a,this.caught=!0},d.prototype.eat=function(){return this.player&&this.game.player.fat++,this.dSpeed*=this.fatnessPenalty,this.maxSpeed*=this.energyBoost},d.prototype.draw=function(){var a,b;return a=this.game.context,a.save(),a.translate(this.x,this.y),0!==this.rotation&&a.rotate(this.rotation),b=this.GFX[this.SPRITENAME],a.drawImage(this.SPRITE,0,this.frame*b.H,b.W,b.H,-b.W+(b.W>>1),-b.H>>1,b.W,b.H),this.caught||(this.framedelay%this.FRAMEDELAYMOD===0?(this.framedelay=this.FRAMEDELAYMOD+1,this.frame++,this.frame>this.LASTFRAME&&(this.frame=0)):this.framedelay++),a.restore()},d.prototype.checkHits=function(){var a,b,c,d;for(a=this.game.hash2d.get(this),c=0,d=a.length;c<d;c++)if(b=a[c],null!=b&&this.canHit(b)&&this.hit(b)&&b.player){this.recruit(b);break}},d.prototype.canHit=function(a){switch(a.constructor.name){case"Fish":return!this.player;default:return!1}},d.prototype.hit=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c<this.r2+a.r2},d.prototype.updateHitRadius=function(){return this.r2=this.GFX[this.SPRITENAME].H,this.r2*=this.r2},d.prototype.remove=function(){return this.player&&this.game.loseFish(),this.move=null,this.catcher=null,this.game=null},b.exports=d},{"./util":15}],5:[function(a,b,c){function d(){var a,b,c,d=this;b=function(a){var b;return b=new j({game:d,x:a.x+h.R(-120,120),y:a.y+h.R(-120,120),player:!0})},c={x:h.R(200,400),y:200},this.entities=this.entities.concat(function(){var d,e;for(e=[],a=d=0;d<1;a=++d)e.push(b(c));return e}()),this.hash2d_new=new m,this.hash2d=new m,this.FG.fatness=new r({game:this}),this.entities.push(new q({SPRITENAME:"swimandeat",game:this})),this.registerInputs(),i.call(this,{draw:g,update:e})}function e(a){return this.mode[this.mode.current].apply(this,[a])}function f(){location=location}function g(){var a,b,c,d;for(this.context.clear(),this.drawSeaFloor(this.BG.SURFACE),this.drawSeaFloor(this.BG.SEAFLOOR1),this.drawSeaFloor(this.BG.SEAFLOOR2),d=this.entities,b=0,c=d.length;b<c;b++)a=d[b],null!=a.move&&null!=a.draw&&a.draw();return this.drawRocks(),this.FG.fatness.draw()}var h=a("./util"),i=a("atom").Game,j=a("./fish"),k=a("./bubble"),l=a("./hook"),m=a("./hash2d"),n=a("./plankton"),o=a("./swarm"),p=a("./rock"),q=a("./stageTitle"),r=a("./statDisplay"),s=a("./roe");d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.gameover=!1,d.prototype.cycles=0,d.prototype.cyclesPeriod=600,d.prototype.current=-1.9,d.prototype.entities=[],d.prototype.player={roe:0,schoolSize:0,fat:10,starvedTime:0,starvedLimit:40,metabolism:0},d.prototype.registerInputs=function(){atom.input.bindEvent(atom.input.KEY.MOUSE_LEFT,"mouseleft"),atom.input.bindEvent(atom.input.KEY.TOUCHING,"touchfinger")},d.prototype.addPlankton=function(a){return this.entities.push(new n({x:a.x+h.R(-32,32),y:a.y+h.R(-32,32),game:this}))},d.prototype.addHook=function(a){return this.entities.push(new l({x:a.x+h.R(-32,32),y:a.y+h.R(-32,32),game:this}))},d.prototype.addBubble=function(a){return this.entities.push(new k({x:a.x+h.R(-64,64),y:a.y+h.R(-32,32),game:this}))},d.prototype.addRoe=function(a){return this.entities.push(new s({x:a.x+h.R(-64,64),y:a.y+h.R(-64,64),game:this}))},d.prototype.addSwarm=function(a){var b,c,d;return c=new o({x:a.x,y:a.y,game:this}),d=function(){var d,e,f;for(f=[],b=d=0,e=h.R(1,3);0<=e?d<e:d>e;b=0<=e?++d:--d)f.push(new j({game:this,x:a.x+h.R(-64,64),y:a.y+h.R(-64,64),target:c}));return f}.call(this),c.add(d),this.entities.push(c),this.entities=this.entities.concat(d)},d.prototype.addRock=function(a){return this.FG.queue.push(new p({x:a.x+h.R(-50,50),game:this}))},d.prototype.intervalAddSwarm=function(){(this.cycles+13)%270===0&&h.r()<.3&&this.addSwarm({x:window.innerWidth+h.R(100,200),y:h.R(20,window.innerHeight-20)})},d.prototype.intervalAddRoe=function(){this.cycles%579===0&&h.r()<.12&&this.addRoe({x:window.innerWidth+h.R(100,200),y:h.R(20,window.innerHeight-20)})},d.prototype.intervalAddPlankton=function(){var a,b,c,d;if((this.cycles+7)%120===0)for(b={x:window.innerWidth+h.R(100,200),y:h.R(20,window.innerHeight-20)},a=c=0,d=h.R(2,8);0<=d?c<d:c>d;a=0<=d?++c:--c)this.addPlankton(b)},d.prototype.intervalAddHooks=function(){var a,b,c,d;if((this.cycles+15)%75===0)for(b={x:window.innerWidth+h.R(100,200),y:h.R(20,window.innerHeight)},a=c=0,d=h.R(2,4);0<=d?c<d:c>d;a=0<=d?++c:--c)this.addHook(b)},d.prototype.intervalAddBubbles=function(){var a,b,c,d;if(this.cycles%210===0)for(b={x:window.innerWidth+h.R(100,200),y:h.R(100,window.innerHeight)},a=c=0,d=h.R(3,6);0<=d?c<d:c>d;a=0<=d?++c:--c)this.addBubble(b)},d.prototype.intervalAddRocks=function(){var a,b,c,d;if(this.cycles%20===0)for(b={x:window.innerWidth+h.R(100,300)},a=c=0,d=h.R(1,3);0<=d?c<d:c>d;a=0<=d?++c:--c)this.addRock(b)},d.prototype.updateEntities=function(){var a,b,c,d,e,f;for(this.hash2d_new.reset(),this.cycles>this.cyclesPeriod?this.cycles=0:this.cycles++,c=[],f=this.entities,d=0,e=f.length;d<e;d++)a=f[d],null!=a.move?(a.move(),c.push(a),a.hashable&&this.hash2d_new.add(a)):delete a.game;this.entities=c,b=this.hash2d,this.hash2d=this.hash2d_new,this.hash2d_new=b},d.prototype.starveSchool=function(){var a,b,c,d;for(d=this.entities,b=0,c=d.length;b<c;b++)if(a=d[b],null!=a.player&&a.player===!0&&h.r()<.4){a.remove(),atom.playSound("die");break}this.player.starveTime=0},d.prototype.metabolize=function(){if(this.cycles%90===0)if(this.player.schoolSize>0){if(this.player.fat-=this.player.metabolism,this.player.fat<0&&(this.player.fat=0,this.player.starveTime++,this.player.starveTime>this.player.starveLimit))return this.starveSchool()}else if(this.gameover===!1)return this.entities.push(new q({SPRITENAME:"gameover",game:this})),setTimeout(f,3e3),this.gameover=!0},d.prototype.addFish=function(){return this.player.metabolism++,this.player.schoolSize++},d.prototype.loseFish=function(){return this.player.fat-=h.R(3,6),this.player.fat<0&&(this.player.fat=0),this.player.metabolism--,this.player.schoolSize--},d.prototype.mode={current:"move",move:function(a){return this.updateEntities(),this.intervalAddBubbles(),this.intervalAddHooks(),this.intervalAddPlankton(),this.intervalAddSwarm(),this.intervalAddRocks(),this.intervalAddRoe(),this.metabolize()}},d.prototype.BG={SURFACE:{sprite:"surface",x:0,w:500,h:-100,rate:.18},SEAFLOOR1:{sprite:"seafloor1",x:0,w:500,h:200,rate:.58},SEAFLOOR2:{sprite:"seafloor2",x:0,w:500,h:100,rate:.97}},d.prototype.FG={queue:[],fatness:null},d.prototype.drawSeaFloor=function(a){var b,c,d,e;for(b=this.context,c=d=-1,e=.002*window.innerWidth>>0;-1<=e?d<=e:d>=e;c=-1<=e?++d:--d)b.drawImage(atom.GFX[a.sprite],a.x+500*c,a.h>0?window.innerHeight-a.h:0);a.x+=a.rate*this.current,a.x<0&&(a.x=500)},d.prototype.drawRocks=function(){var a,b,c,d,e,f,g,h;if(this.cycles%(this.cyclesPeriod>>2)===0){for(b=[],g=this.FG.queue,c=0,e=g.length;c<e;c++)a=g[c],null!=a.move&&null!=a.draw&&(a.move(),a.draw(),b.push(a));this.FG.queue=b}else for(h=this.FG.queue,d=0,f=h.length;d<f;d++)a=h[d],null!=a.move&&null!=a.draw&&(a.move(),a.draw())},b.exports=d},{"./bubble":3,"./fish":4,"./hash2d":6,"./hook":7,"./plankton":9,"./rock":10,"./roe":11,"./stageTitle":12,"./statDisplay":13,"./swarm":14,"./util":15,atom:1}],6:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;null==this.w||null==this.h?(this.w=(window.innerWidth>>this._size)+1,this.h=(window.innerHeight>>this._size)+1,this.wPixels=window.innerWidth,this.hPixels=window.innerHeight):(this.wPixels=this.w<<this._size,this.hPixels=this.h<<this._size),this._objLength=this.w*this.h,this.reset()}d.prototype._size=6,d.prototype.reset=function(){var a;return this._obj=function(){var b,c,d;for(d=[],a=b=0,c=this._objLength;0<=c?b<c:b>c;a=0<=c?++b:--b)d.push([]);return d}.call(this),this},d.prototype.add=function(a){if(a.x>this.wPixels||a.x<0||a.y>this.hPixels||a.y<0);else try{this._obj[this.w*(a.y>>this._size)+(a.x>>this._size)].push(a)}catch(b){throw window.poo=a,""+(a.y>>this._size)+" -- x "+(a.x>>this._size)}return this},d.prototype.get=function(a){return a.x>this.wPixels||a.x<0||a.y>this.hPixels||a.y<0?[]:this._obj[this.w*(a.y>>this._size)+(a.x>>this._size)]},d.prototype.nullify=function(){var a,b,c,d,e,f,g;for(f=this._obj,c=0,e=f.length;c<e;c++)for(a=f[c],b=d=0,g=a.length;0<=g?d<g:d>g;b=0<=g?++d:--d)a[b]=null;return this},b.exports=d},{}],7:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.SPRITENAME="hook"+e.WR(this.SIZES),this.r=e.R(1,8),this.r_2=this.r>>1,this.r2=this.r*this.r}var e=a("./util");d.prototype.x=0,d.prototype.y=0,d.prototype.hashable=!0,d.prototype.caught=!1,d.prototype.HOOKANGLE=3.6185837,d.prototype.draw=function(){var a,b;return a=this.game.context,b=atom.GFX[this.SPRITENAME],a.drawImage(b,this.x-this.GFX[this.SPRITENAME].W_2,this.y-this.GFX[this.SPRITENAME].H_2),a.beginPath(),a.lineWidth=.5,a.strokeStyle=this.caught?"#a44":"#444",a.moveTo(this.x+this.GFX[this.SPRITENAME].W_2-3,this.y-this.GFX[this.SPRITENAME].H_2),a.lineTo(this.x+this.GFX[this.SPRITENAME].W_2-3,0),a.stroke()},d.prototype.move=function(){return this.y<-this.r_2||this.x<-this.r_2?this.move=null:(this.caught?this.y-=3:this.checkHits(),this.x+=2*this.game.current)},d.prototype.checkHits=function(){var a,b,c,d;for(a=this.game.hash2d.get(this),c=0,d=a.length;c<d;c++)if(b=a[c],null!=b&&this.canHit(b)&&this.hit(b)){atom.playSound("tick"),null!=b.hooked&&b.hooked(this),this.caught=!0;break}},d.prototype.canHit=function(a){switch(a.constructor.name){case"Fish":return!0;default:return!1}},d.prototype.hit=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c<this.r2+a.r2},d.prototype.SPRITENAME=null,d.prototype.GFX={hook160:{W:16,H:16,W_2:8,H_2:8},hook161:{W:16,H:16,W_2:8,H_2:8},hook160:{W:16,H:16,W_2:8,H_2:8},hook24:{W:24,H:24,W_2:12,H_2:12},hook32:{W:32,H:32,W_2:16,H_2:16}},d.prototype.SIZES={160:3,161:3,24:2,32:1},b.exports=d},{"./util":15}],8:[function(a,b,c){function d(){return g.playSound("music",!0),window.game=new h,window.game.run()}function e(){return!(!i.gfx||!i.sfx)&&(d(),!0)}function f(){g.preloadImages({gameover:"gfx/gameover.png",swimandeat:"gfx/swimandeat.png",spawninggrounds:"gfx/spawninggrounds.png",bolt24:"gfx/bolt24.png",dna:"gfx/dna.png",roe1:"gfx/roe/1.png",roe2:"gfx/roe/2.png",roe3:"gfx/roe/3.png",fatstart:"gfx/fat/start.png",fatmiddle:"gfx/fat/middle.png",fatend:"gfx/fat/end.png",fledgeling0:"gfx/fledgeling0.png",fledgeling1:"gfx/fledgeling1.png",fish00:"gfx/fish00.png",fish01:"gfx/fish01.png",fish10:"gfx/fish10.png",fish11:"gfx/fish11.png",fish20:"gfx/fish20.png",fish21:"gfx/fish21.png",bubble4:"gfx/bubble/4.png",bubble6:"gfx/bubble/6.png",bubble8:"gfx/bubble/8.png",bubble12:"gfx/bubble/12.png",bubble16:"gfx/bubble/16.png",bubble24:"gfx/bubble/24.png",bubble32:"gfx/bubble/32.png",hook160:"gfx/hook/160.png",hook161:"gfx/hook/161.png",hook24:"gfx/hook/24.png",hook32:"gfx/hook/32.png",rock1:"gfx/rock/1.png",rock2:"gfx/rock/2.png",rock3:"gfx/rock/3.png",rock4:"gfx/rock/4.png",rock5:"gfx/rock/5.png",rock6:"gfx/rock/6.png",rock7:"gfx/rock/7.png",rock8:"gfx/rock/8.png",plankton:"gfx/plankton.png",surface:"gfx/surface.png",seafloor1:"gfx/seafloor1.png",seafloor2:"gfx/seafloor2.png"},function(){return i.gfx=!0,e()}),g.preloadSounds({tick:"sfx/tick.mp3",die:"sfx/die.mp3",music:"sfx/music.mp3",ahahah:"sfx/ahahah1.mp3",plankton1:"sfx/plankton1.mp3",plankton2:"sfx/plankton2.mp3",plankton3:"sfx/plankton3.mp3",recruit:"sfx/recruit.mp3",roe:"sfx/roe.mp3"},function(){return i.sfx=!0,e()})}var g=a("atom");window.atom=g;var h=(a("./util"),a("./game")),i={gfx:!1,sfx:!1};document.addEventListener("DOMContentLoaded",f)},{"./game":5,"./util":15,atom:1}],9:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.spriteX=e.R(0,11),this.spriteY=e.R(0,2),this.r=8,this.r_2=this.r>>1,this.r2=this.r*this.r,this.rotation=e.r(this.PI2)}var e=a("./util");d.prototype.x=0,d.prototype.y=0,d.prototype.PI2=2*Math.PI,d.prototype.r=4,d.prototype.eaten=!1,d.prototype.hashable=!0,d.prototype.frame=0,d.prototype.SPRITE=null,d.prototype.SPRITENAME=null,d.prototype.spriteX=0,d.prototype.spriteY=0,d.prototype.GFX={W:16,H:16,W_2:8,H_2:8},d.prototype.NOISES={plankton1:1,plankton2:1,plankton3:1},d.prototype.draw=function(){var a;return a=this.game.context,a.save(),a.globalAlpha=.3,a.translate(this.x-8,this.y-8),a.drawImage(atom.GFX.plankton,this.spriteX<<4,this.spriteY<<4,16,16,0,0,16,16),a.restore()},d.prototype.move=function(){return this.y<0||this.x<0||this.eaten?this.move=null:(this.checkHits(),this.x+=2*this.game.current)},d.prototype.checkHits=function(){var a,b,c,d;for(a=this.game.hash2d.get(this),c=0,d=a.length;c<d;c++)if(b=a[c],null!=b&&this.canHit(b)&&this.hit(b)){atom.playSound(e.WR(this.NOISES)),null!=b.eat&&b.eat(this),this.eaten=!0;break}},d.prototype.canHit=function(a){switch(a.constructor.name){case"Fish":return!0;default:return!1}},d.prototype.hit=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c<this.r2+a.r2},b.exports=d},{"./util":15}],10:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.SPRITENAME="ROCK"+e.WR(this.SIZES)}var e=a("./util");d.prototype.GFX={ROCK1:{sprite:"rock1",w:100,h:200},ROCK2:{sprite:"rock2",w:100,h:200},ROCK3:{sprite:"rock3",w:100,h:200},ROCK4:{sprite:"rock4",w:100,h:100},ROCK5:{sprite:"rock5",w:100,h:100},ROCK6:{sprite:"rock6",w:100,h:100},ROCK7:{sprite:"rock7",w:100,h:100},ROCK8:{sprite:"rock8",w:100,h:100}},d.prototype.SIZES={1:1,2:1,3:1,4:3,5:3,6:5,7:2,8:4},d.prototype.x=0,d.prototype.y=0,d.prototype.draw=function(){var a,b;this.game&&(a=this.game.context,b=this.GFX[this.SPRITENAME],a.drawImage(atom.GFX[b.sprite],this.x-(b.w>>1),window.innerHeight-b.h))},d.prototype.remove=function(){this.move=null,this.game=null},d.prototype.move=function(){this.x>-100?this.x+=3.1*this.game.current:this.remove()},b.exports=d},{"./util":15}],11:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.SPRITENAME="roe"+e.WR(this.SIZES),this.r2=this.GFX[this.SPRITENAME].W>>1,this.r2*=this.r2}var e=a("./util");d.prototype.x=0,d.prototype.y=0,d.prototype.hashable=!1,d.prototype.SPRITENAME=null,d.prototype.GFX={roe1:{W:16,H:16,W_2:8,H_2:8,N:1},roe2:{W:24,H:16,W_2:12,H_2:8,N:2},roe3:{W:24,H:24,W_2:12,H_2:12,N:3}},d.prototype.draw=function(){var a,b;return a=this.game.context,b=atom.GFX[this.SPRITENAME],a.drawImage(b,this.x-this.GFX[this.SPRITENAME].W_2,this.y-this.GFX[this.SPRITENAME].H_2)},d.prototype.remove=function(){return this.move=null,this.game=null},d.prototype.move=function(){this.y<-this.GFX[this.SPRITENAME].H_2||this.x<-this.GFX[this.SPRITENAME].W_2?this.remove():(this.x+=2*this.game.current,this.checkHits())},d.prototype.checkHits=function(){var a,b,c,d;for(a=this.game.hash2d.get(this),c=0,d=a.length;c<d;c++)if(b=a[c],null!=b&&this.canHit(b)&&this.hit(b)&&b.player){null!=b.collectRoe&&b.collectRoe(this.GFX[this.SPRITENAME].N),this.remove();break}},d.prototype.canHit=function(a){switch(a.constructor.name){case"Fish":return!this.player;default:return!1}},d.prototype.SIZES={1:6,2:2,3:1},d.prototype.hit=function(a){var b,c;return b=a.x-this.x,c=a.y-this.y,b*b+c*c<this.r2+a.r2},b.exports=d},{"./util":15}],12:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.lifetime=this.GFX[this.SPRITENAME].LIFETIME}a("./util");d.prototype.hashable=!1,d.prototype.SPRITENAME=null,d.prototype.GFX={gameover:{W:300,H:100,W_2:150,H_2:50,LIFETIME:300},spawninggrounds:{W:300,H:100,W_2:150,H_2:50,LIFETIME:100},swimandeat:{W:200,H:100,W_2:100,H_2:50,LIFETIME:100}},d.prototype.lifetime=0,d.prototype.draw=function(){var a;a=this.game.context,this.lifetime<40&&(a.globalAlpha=.025*this.lifetime),a.drawImage(atom.GFX[this.SPRITENAME],(window.innerWidth>>1)-this.GFX[this.SPRITENAME].W_2,(window.innerHeight>>1)-this.GFX[this.SPRITENAME].H_2),this.lifetime<40&&(a.globalAlpha=1)},d.prototype.remove=function(){return this.move=null,this.game=null},d.prototype.move=function(){this.lifetime>0?this.lifetime--:this.remove()},b.exports=d},{"./util":15}],13:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c}d.prototype.margin=8,d.prototype.draw=function(){var a,b,c,d,e,f,g,h;if(a=this.game.context,d=window.innerHeight-32-8,a.drawImage(atom.GFX.fatstart,this.margin,d),b=1,this.game.player.fat>>0>0)for(c=e=0,g=this.game.player.fat>>2;0<=g?e<g:e>g;c=0<=g?++e:--e)a.drawImage(atom.GFX.fatmiddle,this.margin+24*b,d),b++;for(a.drawImage(atom.GFX.fatend,this.margin+24*b,d),d-=36,this.game.player.metabolism<5||a.drawImage(atom.GFX.bolt24,this.margin,d),d-=36,c=f=0,h=this.game.player.roe;0<=h?f<h:f>h;c=0<=h?++f:--f)a.drawImage(atom.GFX.dna,this.margin+28*c,d)},b.exports=d},{}],14:[function(a,b,c){function d(a){var b,c;for(b in a)c=a[b],this[b]=c;this.children=[],this.dx=-e.R(2,7)*e.r()}var e=a("./util");d.prototype.hashable=!1,d.prototype.x=0,d.prototype.y=0,d.prototype.dx=0,d.prototype.dy=0,d.prototype.children=null,d.prototype.move=function(){var a;return this.x<-window.innerWidth?(a=null,this.removeChildren()):(this.x+=2*this.game.current+this.dx,this.y+=this.dy)},d.prototype.removeChildren=function(){var a,b,c,d,e;for(d=this.children,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(null==a||a.player||a.caught?void 0:a.remove());return e},d.prototype.add=function(a){return a instanceof Array||(a=[a]),this.children=this.children.concat(a)},b.exports=d},{"./util":15}],15:[function(a,b,c){b.exports={r:function(a){return null==a&&(a=1),a*Math.random()},R:function(a,b){return Math.floor(a+Math.random()*(b-a+1))},AR:function(a){return a[Math.floor(Math.random()*a.length)]},WR:function(a,b){var c,d,e,f,g,h;null==b&&(b=0);for(d in a)h=a[d],b+=h;g=1/b,f=Math.random();for(d in a){if(h=a[d],"undefined"!=typeof c&&null!==c||(c=h*g),f<c)return d;c+=h*g,e=d}return d},sum:function(a,b){var c,d,e,f;if(null==b&&(b=0),a instanceof Array)for(e=0,f=a.length;e<f;e++)d=a[e],b+=d;else for(c in a)d=a[c],b+=d;return b},extend:function(a,b){var c,d;null==a&&(a={});for(c in b)d=b[c],a[c]=d;return a},addEvent:function(a,b,c){return a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){return a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)},removeEvent:function(a,b,c){return a.detachEvent?(a.detachEvent("on"+b,a[b+c]),delete a[b+c]):a.removeEventListener(b,c,!1)}}},{}]},{},[8]);