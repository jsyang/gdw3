<html> <title>Fisch</title>  <meta name="viewport" content="initial-scale=0.72,maximum-scale=0.72,user-scalable=no"> <link rel="apple-touch-icon" href="gfx/bolt64.png"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="Pragma" content="no-cache"> <meta http-equiv="Expires" content="-1"> <body style="padding: 0; margin: 0; background: #1c2236"></body> <script>
!function t(e,i,o){function n(s,h){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(r)return r(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return n(i?i:t)},u,u.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,e,i){function o(t){n.call(this),t&&(this.update=t.update||this.update,this.draw=t.draw||this.draw)}function n(){if(!d){var t=this;document.onkeydown=l.onKeyDown,document.onkeyup=l.onKeyUp;var e=document.createElement("canvas");document.body.appendChild(e),this.canvas=e,this.context=e.getContext("2d"),this.context.clear=function(){this.clearRect(0,0,t.width,t.height)},e.onmousemove=l.onMouseMove,e.onmousedown=l.onMouseDown,e.onmouseup=l.onMouseUp,e.onmousewheel=l.onMouseWheel,e.oncontextmenu=l.onContextMenu,e.ontouchstart=l.onTouchStart,e.ontouchmove=l.onTouchMove,e.ontouchend=l.onTouchEnd,e.ontouchcancel=l.onTouchEnd,e.ontouchleave=l.onTouchEnd,window.onresize=function(){t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight,t.width=t.canvas.width,t.height=t.canvas.height},window.onresize(),d=!0}}function r(t,e,i){if(this.audioContext){var o=this,n=new XMLHttpRequest;n.responseType="arraybuffer",n.open("GET",t,!0),n.onload=function(){o.audioContext.decodeAudioData(n.response,function(t){e&&e(null,t,i)},function(t){e&&e(t)})};try{n.send()}catch(r){e&&e(r.message)}}else e("No audio support")}function s(t,e){function i(t,i,o){t&&console.error(t),i&&(s.SFX[o]=i),n--,e&&0===n&&e()}this.audioContext=new AudioContext,this._mixer=this.audioContext.createGain(),this._mixer.connect(this.audioContext.destination);var o,n=0,s=this;if(this.audioContext)for(o in t){var h=t[o];n++,r.call(this,h,i,o)}else e&&e("No audio support")}function h(t){var e=this.SFX[t];if(e&&this.audioContext){var i=this.audioContext.createBufferSource();return i.buffer=e,i.connect(this._mixer),i.start(),i}}function a(t){this._mixer.gain.value=t}function p(t,e,i){try{var o=new Image;o.onload=function(){e&&e(null,o,i)},o.onerror=function(t){e&&e(t)},o.src=t}catch(n){e&&e(error)}}function u(t,e){function i(t,i,o){t&&console.error(t),i&&(r.GFX[o]=i),n--,e&&0===n&&e()}var o,n=0,r=this;for(o in t){var s=t[o];n++,p.call(this,s,i,o)}}var i,l=t("./input");o.prototype.update=function(){},o.prototype.draw=function(){},o.prototype.run=function(){function t(){e.step(),e.frameRequest=requestAnimationFrame(t)}var e=this;this.running||(this.running=!0,this.last_step=Date.now(),this.frameRequest=requestAnimationFrame(t))},o.prototype.stop=function(){this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.frameRequest=null,this.running=!1},o.prototype.step=function(){var t=Date.now(),e=(t-this.last_step)/1e3;this.last_step=t,this.update(e),this.draw(),l.clearPressed()};var c={},f={},d=!1;i={init:n,Game:o,loadImage:p,preloadImages:u,loadSound:r,preloadSounds:s,playSound:h,setVolume:a,GFX:f,SFX:c,input:l},"undefined"!=typeof e&&e.exports?e.exports=i:window.atom=i},{"./input":2}],2:[function(t,e){function i(t){if(t instanceof KeyboardEvent){if("keydown"===t.type||"keyup"===t.type)return t.keyCode}else if(t instanceof MouseEvent){if("mousedown"===t.type||"mouseup"===t.type){if(0===t.button)return m.MOUSE_LEFT;if(1===t.button)return m.MOUSE_MIDDLE;if(2===t.button)return m.MOUSE_RIGHT}}else if(t instanceof WheelEvent){if("mousewheel"===t.type)return t.wheel>0?m.MOUSE_WHEEL_UP:m.MOUSE_WHEEL_DOWN}else if("touchstart"===t.type||"touchend"===t.type||"touchcancel"===t.type||"touchleave"===t.type)return m.TOUCHING}function o(t,e){g[t]=e}function n(){v.forEach(function(t){x[t]=!1}),v=[],w={}}function r(t){var e=g[i(t)];e&&(x[e]||(w[e]=!0),x[e]=!0),t.stopPropagation(),t.preventDefault()}function s(t){var e=g[i(t)];e&&v.push(e),t.stopPropagation(),t.preventDefault()}function h(t){E.x=t.pageX,E.y=t.pageY}function a(t){r(t)}function p(t){s(t)}function u(t){r(t),s(t)}function l(t){g[m.MOUSE_RIGHT]&&(t.stopPropagation(),t.preventDefault())}function c(t){return w[t]}function f(t){return x[t]}function d(t){return t in v}function y(){return{x:E.x,y:E.y}}var m={MOUSE_LEFT:-1,MOUSE_MIDDLE:-2,MOUSE_RIGHT:-3,MOUSE_WHEEL_DOWN:-4,MOUSE_WHEEL_UP:-5,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,TOUCHING:1e3},g={},x={},w={},v=[],E={x:0,y:0};e.exports={getMouse:y,KEY:m,isPressed:c,isDown:f,isReleased:d,bindEvent:o,clearPressed:n,onKeyDown:r,onKeyUp:s,onMouseDown:a,onMouseUp:p,onMouseMove:h,onMouseWheel:u,onContextMenu:l}},{}],3:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.SPRITENAME="bubble"+o.WR(this.SIZES),this.dy=-o.r(1.9)-3.25,this.lifetime=0,this.amplitude=o.r(3)}var o=t("./util");i.prototype.x=0,i.prototype.y=0,i.prototype.hashable=!1,i.prototype.SPRITENAME=null,i.prototype.GFX={bubble4:{W:4,H:4,W_2:2,H_2:2},bubble6:{W:6,H:6,W_2:3,H_2:3},bubble8:{W:8,H:8,W_2:4,H_2:4},bubble12:{W:12,H:12,W_2:6,H_2:6},bubble16:{W:16,H:16,W_2:8,H_2:8},bubble24:{W:24,H:24,W_2:12,H_2:12},bubble32:{W:32,H:32,W_2:16,H_2:16}},i.prototype.dx=0,i.prototype.lifetime=0,i.prototype.draw=function(){var t,e;return t=this.game.context,t.globalAlpha=.3,e=atom.GFX[this.SPRITENAME],t.drawImage(e,this.x-this.GFX[this.SPRITENAME].W_2+this.amplitude*Math.sin(this.lifetime),this.y-this.GFX[this.SPRITENAME].H_2),this.lifetime++,t.globalAlpha=1},i.prototype.remove=function(){return this.move=null,this.game=null},i.prototype.move=function(){return this.y<-this.GFX[this.SPRITENAME].H_2||this.x<-this.GFX[this.SPRITENAME].W_2?(this.move=null,this.game=null):(this.y+=this.dy,this.x+=2*this.game.current)},i.prototype.SIZES={4:1,6:2,8:3,12:2,16:2,24:1,32:1},e.exports=i},{"./util":15}],4:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;null==this.speed&&(this.speed={x:0,y:0,normalizationFactor:o.r(.27)+.51}),this.player&&this.game.addFish(),null==this.dSpeed&&(this.dSpeed=o.r(.12)+.13),null==this.maxSpeed&&(this.maxSpeed=o.r(8)+4),this.frame=o.R(0,this.LASTFRAME),this.SPRITENAME=o.WR(this.FISHCHANCE),this.SPRITE=atom.GFX[this.SPRITENAME],this.updateHitRadius()}var o=t("./util");i.prototype.x=0,i.prototype.y=0,i.prototype.w=8,i.prototype.h=6,i.prototype.rotation=0,i.prototype.framedelay=0,i.prototype.FRAMEDELAYMOD=2,i.prototype.frame=0,i.prototype.LASTFRAME=7,i.prototype.SPRITE=null,i.prototype.SPRITENAME=null,i.prototype.GFX={fledgeling0:{W:28,H:17},fledgeling1:{W:54,H:34},fish00:{W:46,H:31},fish01:{W:116,H:77},fish10:{W:46,H:31},fish11:{W:116,H:77},fish20:{W:50,H:34},fish21:{W:125,H:86}},i.prototype.FISHCHANCE={fledgeling0:12,fledgeling1:12,fish00:7,fish10:4},i.prototype.speed=null,i.prototype.dSpeed=o.r(.31)+.27,i.prototype.maxSpeed=o.r(10)+2,i.prototype.fatnessPenalty=.987,i.prototype.energyBoost=1.00073,i.prototype.caught=!1,i.prototype.player=!1,i.prototype.recruitFailed=!1,i.prototype.hashable=!0,i.prototype.chase={w_2:32,h_2:32},i.prototype.target=atom.input.getMouse,i.prototype.normalizeSpeed=function(){if(Math.abs(this.x-this.target.x)<this.chase.w_2&&Math.abs(this.y-this.target.y)<this.chase.h_2){if(Math.abs(this.speed.x)<.4*this.maxSpeed||(this.speed.x*=.71*this.speed.normalizationFactor),!(Math.abs(this.speed.y)<.4*this.maxSpeed))return this.speed.y*=.71*this.speed.normalizationFactor}else if(Math.abs(this.speed.x)<this.maxSpeed||(this.speed.x*=this.speed.normalizationFactor),!(Math.abs(this.speed.y)<this.maxSpeed))return this.speed.y*=this.speed.normalizationFactor},i.prototype.setRotation=function(){return this.rotation=Math.atan2(this.speed.y,this.speed.x)},i.prototype.chaseTarget=function(){var t=this.target;return t instanceof Function&&(t=t()),this.x>t.x?this.speed.x-=this.dSpeed:this.speed.x+=this.dSpeed,this.y>t.y?this.speed.y-=this.dSpeed:this.speed.y+=this.dSpeed},i.prototype.move=function(){return this.caught?this.x<0||this.y<0?this.remove():(this.x=this.catcher.x,this.y=this.catcher.y):(this.player===!1&&this.recruitFailed===!1&&this.checkHits(),this.x+=this.speed.x,this.y+=this.speed.y,this.x+=this.game.current,this.chaseTarget(),this.normalizeSpeed(),this.setRotation())},i.prototype.recruit=function(t){var e;e=(this.r2-t.r2)/this.r2,o.r()>e||o.r()<.0015?("Swarm"===this.target.constructor.name&&(this.target.children[this.target.children.indexOf(this)]=null),atom.playSound("recruit"),this.target=atom.input.getMouse,this.player=!0,this.game.addFish()):(atom.playSound("ahahah"),this.recruitFailed=!0)},i.prototype.collectRoe=function(t){return atom.playSound("roe"),this.game.player.roe+=t},i.prototype.hooked=function(t){return this.catcher=t,this.caught=!0},i.prototype.eat=function(){return this.player&&this.game.player.fat++,this.dSpeed*=this.fatnessPenalty,this.maxSpeed*=this.energyBoost},i.prototype.draw=function(){var t,e;return t=this.game.context,t.save(),t.translate(this.x,this.y),0!==this.rotation&&t.rotate(this.rotation),e=this.GFX[this.SPRITENAME],t.drawImage(this.SPRITE,0,this.frame*e.H,e.W,e.H,-e.W+(e.W>>1),-e.H>>1,e.W,e.H),this.caught||(0===this.framedelay%this.FRAMEDELAYMOD?(this.framedelay=this.FRAMEDELAYMOD+1,this.frame++,this.frame>this.LASTFRAME&&(this.frame=0)):this.framedelay++),t.restore()},i.prototype.checkHits=function(){var t,e,i,o;for(t=this.game.hash2d.get(this),i=0,o=t.length;o>i;i++)if(e=t[i],null!=e&&this.canHit(e)&&this.hit(e)&&e.player){this.recruit(e);break}},i.prototype.canHit=function(t){switch(t.constructor.name){case"Fish":return!this.player;default:return!1}},i.prototype.hit=function(t){var e,i;return e=t.x-this.x,i=t.y-this.y,e*e+i*i<this.r2+t.r2},i.prototype.updateHitRadius=function(){return this.r2=this.GFX[this.SPRITENAME].H,this.r2*=this.r2},i.prototype.remove=function(){return this.player&&this.game.loseFish(),this.move=null,this.catcher=null,this.game=null},e.exports=i},{"./util":15}],5:[function(t,e){function i(){var t,e,i,n=this;e=function(t){var e;return e=new a({game:n,x:t.x+s.R(-120,120),y:t.y+s.R(-120,120),player:!0})},i={x:s.R(200,400),y:200},this.entities=this.entities.concat(function(){var o,n;for(n=[],t=o=0;1>o;t=++o)n.push(e(i));return n}()),this.hash2d_new=new l,this.hash2d=new l,this.FG.fatness=new m({game:this}),this.entities.push(new y({SPRITENAME:"swimandeat",game:this})),this.registerInputs(),h.call(this,{draw:r,update:o})}function o(t){return this.mode[this.mode.current].apply(this,[t])}function n(){location=location}function r(){var t,e,i,o;for(this.context.clear(),this.drawSeaFloor(this.BG.SURFACE),this.drawSeaFloor(this.BG.SEAFLOOR1),this.drawSeaFloor(this.BG.SEAFLOOR2),o=this.entities,e=0,i=o.length;i>e;e++)t=o[e],null!=t.move&&null!=t.draw&&t.draw();return this.drawRocks(),this.FG.fatness.draw()}var s=t("./util"),h=t("atom").Game,a=t("./fish"),p=t("./bubble"),u=t("./hook"),l=t("./hash2d"),c=t("./plankton"),f=t("./swarm"),d=t("./rock"),y=t("./stageTitle"),m=t("./statDisplay"),g=t("./roe");i.prototype=Object.create(h.prototype),i.prototype.constructor=i,i.prototype.gameover=!1,i.prototype.cycles=0,i.prototype.cyclesPeriod=600,i.prototype.current=-1.9,i.prototype.entities=[],i.prototype.player={roe:0,schoolSize:0,fat:10,starvedTime:0,starvedLimit:40,metabolism:0},i.prototype.registerInputs=function(){atom.input.bindEvent(atom.input.KEY.MOUSE_LEFT,"mouseleft"),atom.input.bindEvent(atom.input.KEY.TOUCHING,"touchfinger")},i.prototype.addPlankton=function(t){return this.entities.push(new c({x:t.x+s.R(-32,32),y:t.y+s.R(-32,32),game:this}))},i.prototype.addHook=function(t){return this.entities.push(new u({x:t.x+s.R(-32,32),y:t.y+s.R(-32,32),game:this}))},i.prototype.addBubble=function(t){return this.entities.push(new p({x:t.x+s.R(-64,64),y:t.y+s.R(-32,32),game:this}))},i.prototype.addRoe=function(t){return this.entities.push(new g({x:t.x+s.R(-64,64),y:t.y+s.R(-64,64),game:this}))},i.prototype.addSwarm=function(t){var e,i,o;return i=new f({x:t.x,y:t.y,game:this}),o=function(){var o,n,r;for(r=[],e=o=0,n=s.R(1,3);n>=0?n>o:o>n;e=n>=0?++o:--o)r.push(new a({game:this,x:t.x+s.R(-64,64),y:t.y+s.R(-64,64),target:i}));return r}.call(this),i.add(o),this.entities.push(i),this.entities=this.entities.concat(o)},i.prototype.addRock=function(t){return this.FG.queue.push(new d({x:t.x+s.R(-50,50),game:this}))},i.prototype.intervalAddSwarm=function(){0===(this.cycles+13)%270&&s.r()<.3&&this.addSwarm({x:window.innerWidth+s.R(100,200),y:s.R(20,window.innerHeight-20)})},i.prototype.intervalAddRoe=function(){0===this.cycles%579&&s.r()<.12&&this.addRoe({x:window.innerWidth+s.R(100,200),y:s.R(20,window.innerHeight-20)})},i.prototype.intervalAddPlankton=function(){var t,e,i,o;if(0===(this.cycles+7)%120)for(e={x:window.innerWidth+s.R(100,200),y:s.R(20,window.innerHeight-20)},t=i=0,o=s.R(2,8);o>=0?o>i:i>o;t=o>=0?++i:--i)this.addPlankton(e)},i.prototype.intervalAddHooks=function(){var t,e,i,o;if(0===(this.cycles+15)%75)for(e={x:window.innerWidth+s.R(100,200),y:s.R(20,window.innerHeight)},t=i=0,o=s.R(2,4);o>=0?o>i:i>o;t=o>=0?++i:--i)this.addHook(e)},i.prototype.intervalAddBubbles=function(){var t,e,i,o;if(0===this.cycles%210)for(e={x:window.innerWidth+s.R(100,200),y:s.R(100,window.innerHeight)},t=i=0,o=s.R(3,6);o>=0?o>i:i>o;t=o>=0?++i:--i)this.addBubble(e)},i.prototype.intervalAddRocks=function(){var t,e,i,o;if(0===this.cycles%20)for(e={x:window.innerWidth+s.R(100,300)},t=i=0,o=s.R(1,3);o>=0?o>i:i>o;t=o>=0?++i:--i)this.addRock(e)},i.prototype.updateEntities=function(){var t,e,i,o,n,r;for(this.hash2d_new.reset(),this.cycles>this.cyclesPeriod?this.cycles=0:this.cycles++,i=[],r=this.entities,o=0,n=r.length;n>o;o++)t=r[o],null!=t.move?(t.move(),i.push(t),t.hashable&&this.hash2d_new.add(t)):delete t.game;this.entities=i,e=this.hash2d,this.hash2d=this.hash2d_new,this.hash2d_new=e},i.prototype.starveSchool=function(){var t,e,i,o;for(o=this.entities,e=0,i=o.length;i>e;e++)if(t=o[e],null!=t.player&&t.player===!0&&s.r()<.4){t.remove(),atom.playSound("die");break}this.player.starveTime=0},i.prototype.metabolize=function(){if(0===this.cycles%90)if(this.player.schoolSize>0){if(this.player.fat-=this.player.metabolism,this.player.fat<0&&(this.player.fat=0,this.player.starveTime++,this.player.starveTime>this.player.starveLimit))return this.starveSchool()}else if(this.gameover===!1)return this.entities.push(new y({SPRITENAME:"gameover",game:this})),setTimeout(n,3e3),this.gameover=!0},i.prototype.addFish=function(){return this.player.metabolism++,this.player.schoolSize++},i.prototype.loseFish=function(){return this.player.fat-=s.R(3,6),this.player.fat<0&&(this.player.fat=0),this.player.metabolism--,this.player.schoolSize--},i.prototype.mode={current:"move",move:function(){return this.updateEntities(),this.intervalAddBubbles(),this.intervalAddHooks(),this.intervalAddPlankton(),this.intervalAddSwarm(),this.intervalAddRocks(),this.intervalAddRoe(),this.metabolize()}},i.prototype.BG={SURFACE:{sprite:"surface",x:0,w:500,h:-100,rate:.18},SEAFLOOR1:{sprite:"seafloor1",x:0,w:500,h:200,rate:.58},SEAFLOOR2:{sprite:"seafloor2",x:0,w:500,h:100,rate:.97}},i.prototype.FG={queue:[],fatness:null},i.prototype.drawSeaFloor=function(t){var e,i,o,n;for(e=this.context,i=o=-1,n=.002*window.innerWidth>>0;n>=-1?n>=o:o>=n;i=n>=-1?++o:--o)e.drawImage(atom.GFX[t.sprite],t.x+500*i,t.h>0?window.innerHeight-t.h:0);t.x+=t.rate*this.current,t.x<0&&(t.x=500)},i.prototype.drawRocks=function(){var t,e,i,o,n,r,s,h;if(0===this.cycles%(this.cyclesPeriod>>2)){for(e=[],s=this.FG.queue,i=0,n=s.length;n>i;i++)t=s[i],null!=t.move&&null!=t.draw&&(t.move(),t.draw(),e.push(t));this.FG.queue=e}else for(h=this.FG.queue,o=0,r=h.length;r>o;o++)t=h[o],null!=t.move&&null!=t.draw&&(t.move(),t.draw())},e.exports=i},{"./bubble":3,"./fish":4,"./hash2d":6,"./hook":7,"./plankton":9,"./rock":10,"./roe":11,"./stageTitle":12,"./statDisplay":13,"./swarm":14,"./util":15,atom:1}],6:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;null==this.w||null==this.h?(this.w=(window.innerWidth>>this._size)+1,this.h=(window.innerHeight>>this._size)+1,this.wPixels=window.innerWidth,this.hPixels=window.innerHeight):(this.wPixels=this.w<<this._size,this.hPixels=this.h<<this._size),this._objLength=this.w*this.h,this.reset()}i.prototype._size=6,i.prototype.reset=function(){var t;return this._obj=function(){var e,i,o;for(o=[],t=e=0,i=this._objLength;i>=0?i>e:e>i;t=i>=0?++e:--e)o.push([]);return o}.call(this),this},i.prototype.add=function(t){if(t.x>this.wPixels||t.x<0||t.y>this.hPixels||t.y<0);else try{this._obj[this.w*(t.y>>this._size)+(t.x>>this._size)].push(t)}catch(e){throw window.poo=t,""+(t.y>>this._size)+" -- x "+(t.x>>this._size)}return this},i.prototype.get=function(t){return t.x>this.wPixels||t.x<0||t.y>this.hPixels||t.y<0?[]:this._obj[this.w*(t.y>>this._size)+(t.x>>this._size)]},i.prototype.nullify=function(){var t,e,i,o,n,r,s;for(r=this._obj,i=0,n=r.length;n>i;i++)for(t=r[i],e=o=0,s=t.length;s>=0?s>o:o>s;e=s>=0?++o:--o)t[e]=null;return this},e.exports=i},{}],7:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.SPRITENAME="hook"+o.WR(this.SIZES),this.r=o.R(1,8),this.r_2=this.r>>1,this.r2=this.r*this.r}var o=t("./util");i.prototype.x=0,i.prototype.y=0,i.prototype.hashable=!0,i.prototype.caught=!1,i.prototype.HOOKANGLE=3.6185837,i.prototype.draw=function(){var t,e;return t=this.game.context,e=atom.GFX[this.SPRITENAME],t.drawImage(e,this.x-this.GFX[this.SPRITENAME].W_2,this.y-this.GFX[this.SPRITENAME].H_2),t.beginPath(),t.lineWidth=.5,t.strokeStyle=this.caught?"#a44":"#444",t.moveTo(this.x+this.GFX[this.SPRITENAME].W_2-3,this.y-this.GFX[this.SPRITENAME].H_2),t.lineTo(this.x+this.GFX[this.SPRITENAME].W_2-3,0),t.stroke()},i.prototype.move=function(){return this.y<-this.r_2||this.x<-this.r_2?this.move=null:(this.caught?this.y-=3:this.checkHits(),this.x+=2*this.game.current)},i.prototype.checkHits=function(){var t,e,i,o;for(t=this.game.hash2d.get(this),i=0,o=t.length;o>i;i++)if(e=t[i],null!=e&&this.canHit(e)&&this.hit(e)){atom.playSound("tick"),null!=e.hooked&&e.hooked(this),this.caught=!0;break}},i.prototype.canHit=function(t){switch(t.constructor.name){case"Fish":return!0;default:return!1}},i.prototype.hit=function(t){var e,i;return e=t.x-this.x,i=t.y-this.y,e*e+i*i<this.r2+t.r2},i.prototype.SPRITENAME=null,i.prototype.GFX={hook160:{W:16,H:16,W_2:8,H_2:8},hook161:{W:16,H:16,W_2:8,H_2:8},hook160:{W:16,H:16,W_2:8,H_2:8},hook24:{W:24,H:24,W_2:12,H_2:12},hook32:{W:32,H:32,W_2:16,H_2:16}},i.prototype.SIZES={160:3,161:3,24:2,32:1},e.exports=i},{"./util":15}],8:[function(t){function e(){return n.playSound("music",!0),window.game=new r,window.game.run()}function i(){return!(!s.gfx||!s.sfx||(e(),0))}function o(){n.preloadImages({gameover:"gfx/gameover.png",swimandeat:"gfx/swimandeat.png",spawninggrounds:"gfx/spawninggrounds.png",bolt24:"gfx/bolt24.png",dna:"gfx/dna.png",roe1:"gfx/roe/1.png",roe2:"gfx/roe/2.png",roe3:"gfx/roe/3.png",fatstart:"gfx/fat/start.png",fatmiddle:"gfx/fat/middle.png",fatend:"gfx/fat/end.png",fledgeling0:"gfx/fledgeling0.png",fledgeling1:"gfx/fledgeling1.png",fish00:"gfx/fish00.png",fish01:"gfx/fish01.png",fish10:"gfx/fish10.png",fish11:"gfx/fish11.png",fish20:"gfx/fish20.png",fish21:"gfx/fish21.png",bubble4:"gfx/bubble/4.png",bubble6:"gfx/bubble/6.png",bubble8:"gfx/bubble/8.png",bubble12:"gfx/bubble/12.png",bubble16:"gfx/bubble/16.png",bubble24:"gfx/bubble/24.png",bubble32:"gfx/bubble/32.png",hook160:"gfx/hook/160.png",hook161:"gfx/hook/161.png",hook24:"gfx/hook/24.png",hook32:"gfx/hook/32.png",rock1:"gfx/rock/1.png",rock2:"gfx/rock/2.png",rock3:"gfx/rock/3.png",rock4:"gfx/rock/4.png",rock5:"gfx/rock/5.png",rock6:"gfx/rock/6.png",rock7:"gfx/rock/7.png",rock8:"gfx/rock/8.png",plankton:"gfx/plankton.png",surface:"gfx/surface.png",seafloor1:"gfx/seafloor1.png",seafloor2:"gfx/seafloor2.png"},function(){return s.gfx=!0,i()}),n.preloadSounds({tick:"sfx/tick.mp3",die:"sfx/die.mp3",music:"sfx/music.mp3",ahahah:"sfx/ahahah1.mp3",plankton1:"sfx/plankton1.mp3",plankton2:"sfx/plankton2.mp3",plankton3:"sfx/plankton3.mp3",recruit:"sfx/recruit.mp3",roe:"sfx/roe.mp3"},function(){return s.sfx=!0,i()})}var n=t("atom");window.atom=n;var r=(t("./util"),t("./game")),s={gfx:!1,sfx:!1};document.addEventListener("DOMContentLoaded",o)},{"./game":5,"./util":15,atom:1}],9:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.spriteX=o.R(0,11),this.spriteY=o.R(0,2),this.r=8,this.r_2=this.r>>1,this.r2=this.r*this.r,this.rotation=o.r(this.PI2)}var o=t("./util");i.prototype.x=0,i.prototype.y=0,i.prototype.PI2=2*Math.PI,i.prototype.r=4,i.prototype.eaten=!1,i.prototype.hashable=!0,i.prototype.frame=0,i.prototype.SPRITE=null,i.prototype.SPRITENAME=null,i.prototype.spriteX=0,i.prototype.spriteY=0,i.prototype.GFX={W:16,H:16,W_2:8,H_2:8},i.prototype.NOISES={plankton1:1,plankton2:1,plankton3:1},i.prototype.draw=function(){var t;return t=this.game.context,t.save(),t.globalAlpha=.3,t.translate(this.x-8,this.y-8),t.drawImage(atom.GFX.plankton,this.spriteX<<4,this.spriteY<<4,16,16,0,0,16,16),t.restore()},i.prototype.move=function(){return this.y<0||this.x<0||this.eaten?this.move=null:(this.checkHits(),this.x+=2*this.game.current)},i.prototype.checkHits=function(){var t,e,i,n;for(t=this.game.hash2d.get(this),i=0,n=t.length;n>i;i++)if(e=t[i],null!=e&&this.canHit(e)&&this.hit(e)){atom.playSound(o.WR(this.NOISES)),null!=e.eat&&e.eat(this),this.eaten=!0;break}},i.prototype.canHit=function(t){switch(t.constructor.name){case"Fish":return!0;default:return!1}},i.prototype.hit=function(t){var e,i;return e=t.x-this.x,i=t.y-this.y,e*e+i*i<this.r2+t.r2},e.exports=i},{"./util":15}],10:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.SPRITENAME="ROCK"+o.WR(this.SIZES)}var o=t("./util");i.prototype.GFX={ROCK1:{sprite:"rock1",w:100,h:200},ROCK2:{sprite:"rock2",w:100,h:200},ROCK3:{sprite:"rock3",w:100,h:200},ROCK4:{sprite:"rock4",w:100,h:100},ROCK5:{sprite:"rock5",w:100,h:100},ROCK6:{sprite:"rock6",w:100,h:100},ROCK7:{sprite:"rock7",w:100,h:100},ROCK8:{sprite:"rock8",w:100,h:100}},i.prototype.SIZES={1:1,2:1,3:1,4:3,5:3,6:5,7:2,8:4},i.prototype.x=0,i.prototype.y=0,i.prototype.draw=function(){var t,e;this.game&&(t=this.game.context,e=this.GFX[this.SPRITENAME],t.drawImage(atom.GFX[e.sprite],this.x-(e.w>>1),window.innerHeight-e.h))},i.prototype.remove=function(){this.move=null,this.game=null},i.prototype.move=function(){this.x>-100?this.x+=3.1*this.game.current:this.remove()},e.exports=i},{"./util":15}],11:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.SPRITENAME="roe"+o.WR(this.SIZES),this.r2=this.GFX[this.SPRITENAME].W>>1,this.r2*=this.r2}var o=t("./util");i.prototype.x=0,i.prototype.y=0,i.prototype.hashable=!1,i.prototype.SPRITENAME=null,i.prototype.GFX={roe1:{W:16,H:16,W_2:8,H_2:8,N:1},roe2:{W:24,H:16,W_2:12,H_2:8,N:2},roe3:{W:24,H:24,W_2:12,H_2:12,N:3}},i.prototype.draw=function(){var t,e;return t=this.game.context,e=atom.GFX[this.SPRITENAME],t.drawImage(e,this.x-this.GFX[this.SPRITENAME].W_2,this.y-this.GFX[this.SPRITENAME].H_2)},i.prototype.remove=function(){return this.move=null,this.game=null},i.prototype.move=function(){this.y<-this.GFX[this.SPRITENAME].H_2||this.x<-this.GFX[this.SPRITENAME].W_2?this.remove():(this.x+=2*this.game.current,this.checkHits())},i.prototype.checkHits=function(){var t,e,i,o;for(t=this.game.hash2d.get(this),i=0,o=t.length;o>i;i++)if(e=t[i],null!=e&&this.canHit(e)&&this.hit(e)&&e.player){null!=e.collectRoe&&e.collectRoe(this.GFX[this.SPRITENAME].N),this.remove();break}},i.prototype.canHit=function(t){switch(t.constructor.name){case"Fish":return!this.player;default:return!1}},i.prototype.SIZES={1:6,2:2,3:1},i.prototype.hit=function(t){var e,i;return e=t.x-this.x,i=t.y-this.y,e*e+i*i<this.r2+t.r2},e.exports=i},{"./util":15}],12:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.lifetime=this.GFX[this.SPRITENAME].LIFETIME}t("./util"),i.prototype.hashable=!1,i.prototype.SPRITENAME=null,i.prototype.GFX={gameover:{W:300,H:100,W_2:150,H_2:50,LIFETIME:300},spawninggrounds:{W:300,H:100,W_2:150,H_2:50,LIFETIME:100},swimandeat:{W:200,H:100,W_2:100,H_2:50,LIFETIME:100}},i.prototype.lifetime=0,i.prototype.draw=function(){var t;t=this.game.context,this.lifetime<40&&(t.globalAlpha=.025*this.lifetime),t.drawImage(atom.GFX[this.SPRITENAME],(window.innerWidth>>1)-this.GFX[this.SPRITENAME].W_2,(window.innerHeight>>1)-this.GFX[this.SPRITENAME].H_2),this.lifetime<40&&(t.globalAlpha=1)},i.prototype.remove=function(){return this.move=null,this.game=null},i.prototype.move=function(){this.lifetime>0?this.lifetime--:this.remove()},e.exports=i},{"./util":15}],13:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i}i.prototype.margin=8,i.prototype.draw=function(){var t,e,i,o,n,r,s,h;if(t=this.game.context,o=window.innerHeight-32-8,t.drawImage(atom.GFX.fatstart,this.margin,o),e=1,this.game.player.fat>>0>0)for(i=n=0,s=this.game.player.fat>>2;s>=0?s>n:n>s;i=s>=0?++n:--n)t.drawImage(atom.GFX.fatmiddle,this.margin+24*e,o),e++;for(t.drawImage(atom.GFX.fatend,this.margin+24*e,o),o-=36,this.game.player.metabolism<5||t.drawImage(atom.GFX.bolt24,this.margin,o),o-=36,i=r=0,h=this.game.player.roe;h>=0?h>r:r>h;i=h>=0?++r:--r)t.drawImage(atom.GFX.dna,this.margin+28*i,o)},e.exports=i},{}],14:[function(t,e){function i(t){var e,i;for(e in t)i=t[e],this[e]=i;this.children=[],this.dx=-o.R(2,7)*o.r()}var o=t("./util");i.prototype.hashable=!1,i.prototype.x=0,i.prototype.y=0,i.prototype.dx=0,i.prototype.dy=0,i.prototype.children=null,i.prototype.move=function(){var t;return this.x<-window.innerWidth?(t=null,this.removeChildren()):(this.x+=2*this.game.current+this.dx,this.y+=this.dy)},i.prototype.removeChildren=function(){var t,e,i,o,n;for(o=this.children,n=[],e=0,i=o.length;i>e;e++)t=o[e],n.push(null==t||t.player||t.caught?void 0:t.remove());return n},i.prototype.add=function(t){return t instanceof Array||(t=[t]),this.children=this.children.concat(t)},e.exports=i},{"./util":15}],15:[function(t,e){e.exports={r:function(t){return null==t&&(t=1),t*Math.random()},R:function(t,e){return Math.floor(t+Math.random()*(e-t+1))},AR:function(t){return t[Math.floor(Math.random()*t.length)]},WR:function(t,e){var i,o,n,r,s,h;null==e&&(e=0);for(o in t)h=t[o],e+=h;s=1/e,r=Math.random();for(o in t){if(h=t[o],"undefined"!=typeof i&&null!==i||(i=h*s),i>r)return o;i+=h*s,n=o}return o},sum:function(t,e){var i,o,n,r;if(null==e&&(e=0),t instanceof Array)for(n=0,r=t.length;r>n;n++)o=t[n],e+=o;else for(i in t)o=t[i],e+=o;return e},extend:function(t,e){var i,o;null==t&&(t={});for(i in e)o=e[i],t[i]=o;return t},addEvent:function(t,e,i){return t.attachEvent?(t["e"+e+i]=i,t[e+i]=function(){return t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i])):t.addEventListener(e,i,!1)},removeEvent:function(t,e,i){return t.detachEvent?(t.detachEvent("on"+e,t[e+i]),delete t[e+i]):t.removeEventListener(e,i,!1)}}},{}]},{},[8]);
</script> </html>