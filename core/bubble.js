// Generated by CoffeeScript 1.4.0

define(function() {
  var Bubble;
  return Bubble = (function() {

    Bubble.prototype.x = 0;

    Bubble.prototype.y = 0;

    Bubble.prototype.dx = 0;

    Bubble.prototype.lifetime = 0;

    Bubble.prototype.PI2 = 2 * Math.PI;

    Bubble.prototype.draw = function() {
      var ac;
      ac = atom.context;
      if (false) {
        return ac.drawImage(atom.gfx.bubble, this.x - this.w_2 + this.dx, this.y - this.h_2);
      } else {
        ac.save();
        ac.globalAlpha = 0.4;
        ac.lineWidth = 2;
        ac.fillStyle = '#A2CBF5';
        ac.beginPath();
        ac.arc(this.x - this.r_2 + this.dx, this.y - this.r_2, this.r, 0, this.PI2);
        ac.fill();
        return ac.restore();
      }
    };

    Bubble.prototype.move = function() {
      if (this.y < -this.r_2 || this.x < -this.r_2) {
        return this.move = null;
      } else {
        this.y += this.dy;
        this.x += $$.r(1) + 4 * this.game.current;
        this.dx = this.dxAmplitude * Math.sin(this.lifetime);
        return this.lifetime += 0.2;
      }
    };

    function Bubble(params) {
      var k, v;
      for (k in params) {
        v = params[k];
        this[k] = v;
      }
      this.r = $$.R(1, 2) + $$.r(3);
      this.r_2 = this.r >> 1;
      this.dy = -$$.r(2.9) - 0.85;
      this.dxAmplitude = $$.r(3) + 1;
    }

    return Bubble;

  })();
});
